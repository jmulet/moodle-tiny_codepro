define("tiny_codepro/viewpanel",["exports","./preferences","./options","./viewmanager"],(function(_exports,_preferences,_options,_viewmanager){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.ViewPanelManager=void 0;
/**
   * Tiny CodePro plugin.
   *
   * @module      tiny_codepro/plugin
   * @copyright   2023-2025 Josep Mulet Pol <pep.mulet@gmail.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
class ViewPanelManager extends _viewmanager.ViewManager{constructor(editor,opts){super(editor,opts),this.translations=this.opts.translations??[],this.isViewCreated=!1}_tShow(){this.editor.execCommand("ToggleView",!1,"codepro")}_tClose(){this.editor.execCommand("ToggleView",!1,"codepro")}async _tCreate(){if(this.isViewCreated)return;this.isViewCreated=!0,this.#registerIcons();const viewSpec=this.#createViewSpec();this.editor.ui.registry.addView("codepro",viewSpec)}#createViewSpec(){return{buttons:this.#createButtons(),onShow:async api=>{if(!this.codeEditorElement){this.codeEditorElement=document.createElement("DIV");const container=api.getContainer();container.classList.add("tiny_codepro-view__pane");const shadowRoot=container.attachShadow({mode:"open"});this.codeEditorElement.classList.add("tiny_codepro-container");const shadowStyles=document.createElement("style");shadowStyles.textContent="\n                    .tiny_codepro-container {\n                        height: 100%;\n                    }\n                    .cm-editor.cm-focused {\n                        outline: none!important;\n                    }\n                    .cm-editor {\n                        height: 100%;\n                    }",shadowRoot.appendChild(shadowStyles),shadowRoot.appendChild(this.codeEditorElement)}await this.attachCodeEditor(this.codeEditorElement),this.setHTMLCodeOrState()},onHide:()=>{}}}#registerIcons(){Object.keys(_viewmanager.ViewManager.icons).forEach((key=>{this.editor.ui.registry.addIcon(`tiny_codepro-${key}`,_viewmanager.ViewManager.icons[key])}))}#createButtons(){const[opendialogStr,fullscreenStr,themesStr,linewrapStr,prettifyStr,decreaseFontsizeStr,increaseFontsizeStr]=this.translations,buttons=[{type:"button",text:" ",icon:"tiny_codepro-fullscreen",tooltip:fullscreenStr,onAction:()=>{(0,_preferences.setPref)("fs",!(0,_options.isFullscreen)(this.editor),!0),this.editor.execCommand("mceFullScreen")}},{type:"button",text:"",icon:"tiny_codepro-decreasefontsize",tooltip:decreaseFontsizeStr,onAction:this.decreaseFontsize.bind(this)},{type:"button",text:"",icon:"tiny_codepro-increasefontsize",tooltip:increaseFontsizeStr,onAction:this.increaseFontsize.bind(this)},{type:"button",text:" ",icon:"tiny_codepro-sun",tooltip:themesStr,onAction:this.toggleTheme.bind(this)},{type:"button",text:" ",icon:"tiny_codepro-exchange",tooltip:linewrapStr,onAction:this.toggleLineWrapping.bind(this)},{type:"button",text:" ",icon:"tiny_codepro-magic",tooltip:prettifyStr,onAction:this.prettify.bind(this)},{type:"button",text:" tinyMCE",icon:"tiny_codepro-tinymce",buttonType:"primary",onAction:this.accept.bind(this)}];return((0,_options.getDefaultUI)(this.editor)??"dialog").startsWith("user:")&&buttons.unshift({type:"button",text:" ",icon:"tiny_codepro-eye",tooltip:opendialogStr,onAction:this.switchViews.bind(this)}),buttons}}_exports.ViewPanelManager=ViewPanelManager}));

//# sourceMappingURL=viewpanel.min.js.map